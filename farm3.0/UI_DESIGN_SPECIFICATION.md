# 农场游戏前端界面设计规范

## 项目概述

基于链上农场游戏合约，设计完整的前端用户界面。游戏包含NFT资产（种子/作物、土地）、ERC-20代币（KIND善良值）和实时天气系统，形成完整的链游体验。

## 整体架构设计

### 1. 导航结构

**顶部导航栏**：
- 农场 (Farm) - 核心游戏区域
- 商店 (Shop) - 购买种子和工具
- 排行榜 (Leaderboard) - 双排行榜系统
- 自己 (Self) - 个人物品和统计
- 钱包信息显示区域
  - Monad测试币数量
  - 善良值代币数量
- 钱包连接按钮

### 2. 页面布局逻辑

**响应式设计原则**：
- 桌面端：完整功能展示

## 功能模块详细设计

### 模块一：农场页面 (Desktop-1)

#### 核心功能
- **100块土地网格显示**：10x10网格布局，每块土地独立状态
- **土地状态可视化**：
  - 空闲状态：灰色边框，显示"可种植"
  - 种植中：绿色边框，显示作物类型和生长进度
  - 成熟状态：金色边框，显示"可收获"
  - 冷却状态：红色边框，显示剩余冷却时间
- **天气效果显示**：每块土地独立天气图标和效果
- **实时生长进度**：进度条显示当前生长阶段

#### 交互逻辑
- **点击土地**：
  - 空闲土地：弹出种子选择菜单
  - 种植中土地：显示详细信息（作物类型、剩余时间、天气影响）
  - 成熟土地：显示收获/偷取选项
  - 冷却土地：显示冷却倒计时
- **拖拽功能**：如果100块土地超出屏幕，支持拖拽查看
- **批量操作**：支持选择多块土地进行批量操作

#### 视觉设计
- **土地网格**：统一大小，清晰边界
- **状态颜色**：空闲(灰)、种植(绿)、成熟(金)、冷却(红)
- **天气图标**：晴天(☀️)、雨天(🌧️)、阴天(☁️)、暴风雨(⛈️)
- **进度条**：线性进度条，显示生长百分比

### 模块二：商店页面 (Desktop-2)

#### 核心功能
- **种子购买区域**：
  - 普通种子：小麦、玉米、南瓜（原生币购买）
  - 稀有种子：草莓、葡萄、西瓜（KIND代币购买）
  - 种子信息：类型、稀有度、生长时间、价格
- **工具购买区域**：
  - 浇水工具：减少2分钟生长时间
  - 施肥工具：减少5%生长时间
  - 工具信息：效果、价格、使用次数限制

#### 交互逻辑
- **种子选择**：点击种子显示详细信息
- **购买确认**：选择支付方式（原生币/KIND）
- **库存显示**：显示当前拥有的种子和工具数量
- **购物车**：支持批量购买

#### 视觉设计
- **种子卡片**：显示种子图片、名称、价格、稀有度标识
- **工具卡片**：显示工具图标、效果描述、价格
- **支付方式**：清晰的支付方式选择按钮
- **库存显示**：当前拥有的物品数量

### 模块三：排行榜页面 (Desktop-3)

#### 双排行榜系统

**A. 善良值排行榜**：
- **主要指标**：KIND代币持有数量
- **显示内容**：排名、玩家地址、KIND余额、帮助次数
- **排序规则**：按KIND余额降序排列
- **实时更新**：帮助他人后立即更新排名

**B. 作物排行榜**：
- **主要指标**：成熟作物NFT持有数量
- **加权规则**：
  - 普通作物 = 1分
  - 稀有作物 = 2分
  - 传说作物 = 3分
- **显示内容**：排名、玩家地址、收获数、偷取数、帮助数
- **排序规则**：按加权总分降序排列

#### 交互逻辑
- **排名切换**：支持在两个排行榜间切换
- **详细信息**：点击玩家查看详细统计
- **实时更新**：收获/偷取/帮助后自动刷新
- **排名变化**：显示排名上升/下降动画

#### 视觉设计
- **排行榜列表**：清晰的排名、地址、数值显示
- **排名标识**：前三名特殊标识（🥇🥈🥉）
- **变化指示**：排名上升(↑)下降(↓)标识
- **个人排名**：高亮显示当前用户排名

### 模块四：个人页面 (Desktop-4)

#### 核心功能
- **收获作物展示**：NFT画廊形式展示拥有的作物
- **工具库存**：显示拥有的工具和数量
- **个人统计**：
  - 总收获作物数
  - 总偷取作物数
  - 总帮助他人次数
  - 当前KIND余额
- **成就系统**：解锁的成就和徽章

#### 交互逻辑
- **NFT展示**：点击查看NFT详细信息
- **统计图表**：可视化显示个人数据
- **成就展示**：解锁的成就和进度
- **历史记录**：操作历史和交易记录

#### 视觉设计
- **NFT画廊**：网格布局展示NFT
- **统计面板**：图表和数字结合显示
- **成就徽章**：图标化显示成就
- **历史记录**：时间线形式展示

## 数据流设计

### 1. 用户操作流程

```
1. 连接钱包
   ↓
2. 获取账户信息（余额、NFT、统计）
   ↓
3. 查看农场状态
   ↓
4. 购买种子（商店）
   ↓
5. 种植作物（农场）
   ↓
6. 等待生长/使用工具加速
   ↓
7. 收获作物/被他人偷取
   ↓
8. 更新个人统计和排行榜
```

### 2. 实时数据更新

**合约事件监听**：
- `LandClaimed` → 更新农场土地状态
- `CropHarvested` → 更新个人统计 + 排行榜
- `CropStolen` → 更新排行榜
- `HelpProvided` → 更新KIND余额 + 排行榜
- `WeatherUpdated` → 更新农场天气显示

**数据更新策略**：
- 实时事件监听：关键操作立即更新
- 定时刷新：每30秒刷新一次数据
- 用户操作后：操作完成后立即更新相关数据

## 技术实现要点

### 1. 状态管理

**全局状态结构**：
```typescript
interface GameState {
  // 用户信息
  user: {
    address: string;
    monadBalance: bigint;
    kindBalance: bigint;
  };
  
  // 农场数据
  farm: {
    lands: LandInfo[];
    weather: WeatherInfo[];
  };
  
  // 个人数据
  personal: {
    seeds: SeedNFT[];
    harvestedCrops: CropNFT[];
    stats: PlayerStats;
  };
  
  // 排行榜数据
  leaderboard: {
    cropRanking: PlayerRanking[];
    kindnessRanking: PlayerRanking[];
  };
}
```

### 2. 组件架构

**页面组件层次**：
```
App
├── Navigation (顶部导航)
├── WalletInfo (钱包信息显示)
├── Router (页面路由)
│   ├── FarmPage (农场页面)
│   │   ├── LandGrid (土地网格)
│   │   ├── WeatherDisplay (天气显示)
│   │   └── ActionPanel (操作面板)
│   ├── ShopPage (商店页面)
│   │   ├── SeedSection (种子区域)
│   │   └── ToolSection (工具区域)
│   ├── LeaderboardPage (排行榜页面)
│   │   ├── CropLeaderboard (作物排行榜)
│   │   └── KindnessLeaderboard (善良值排行榜)
│   └── ProfilePage (个人页面)
│       ├── NFTGallery (NFT画廊)
│       └── StatsPanel (统计面板)
└── EventListener (事件监听器)
```

### 3. 数据获取策略

**排行榜数据聚合**：
- 获取所有玩家地址（从事件日志中提取）
- 批量查询每个玩家的统计数据
- 本地计算和排序
- 缓存结果并定期更新

**性能优化**：
- 使用React Query缓存数据
- 分页加载大量数据
- 虚拟滚动优化长列表
- 防抖处理频繁更新

## 用户体验设计

### 1. 交互反馈

**操作反馈**：
- 点击反馈：按钮点击动画
- 加载状态：操作进行中的加载指示器
- 成功提示：操作成功的确认消息
- 错误处理：操作失败的错误提示

**视觉反馈**：
- 状态变化动画
- 排名变化指示
- 进度条动画
- 天气效果动画

### 2. 响应式设计

**桌面端**：
- 完整功能展示
- 多列布局
- 鼠标悬停效果


## 开发优先级

### 第一阶段：基础架构
1. React项目搭建
2. 路由配置
3. 基础UI组件库
4. 钱包连接功能

### 第二阶段：核心功能
1. 农场页面实现
2. 商店页面实现
3. 基础游戏操作

### 第三阶段：高级功能
1. 排行榜系统
2. 个人页面
3. 实时数据更新

### 第四阶段：优化完善
1. 性能优化
2. 用户体验优化
3. 错误处理完善
4. 部署和测试

## 总结

本设计规范涵盖了农场游戏的完整前端界面设计，包括四个主要功能模块、数据流设计、技术实现要点和用户体验设计。设计遵循了用户友好的原则，确保游戏操作的直观性和流畅性，同时充分利用了区块链游戏的特点，实现了NFT资产展示、实时数据更新和社交竞争元素。
